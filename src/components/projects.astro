---
import { getCollection } from 'astro:content';

const projects = await getCollection('projects');

const projectsWithContent = await Promise.all(
  projects.map(async (project) => {
    const { Content } = await project.render();
    return { ...project, Content };
  })
);
---

<section class="bg-main text-white lg:px-100 py-12 mt-100">
  <h2 class="text-2xl mb-4">My side projects</h2>
  <div class="space-y-6">
    {projectsWithContent.map(({ data, Content }) => (
      <div class="bg-second rounded-2xl p-6">
        <img src={data.image} alt={data.title} class="w-16 h-16 bg-white rounded-md mb-2" />
        <h3 class="text-xl mb-2">{data.title}</h3>
        <Content />
      </div>
    ))}

    <div class="bg-second rounded-2xl p-6 text-center text-gray-400">
      Cooking Something Up...
    </div>
  </div>
</section>

